{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AI Story Book Environment Variables",
  "description": "Required and optional environment variables for AI Story Book deployment",
  "type": "object",
  "required": [
    "DATABASE_URL",
    "REDIS_URL",
    "LLM_PROVIDER",
    "IMAGE_PROVIDER",
    "S3_ENDPOINT",
    "S3_ACCESS_KEY",
    "S3_SECRET_KEY",
    "S3_BUCKET"
  ],
  "properties": {
    "DATABASE_URL": {
      "type": "string",
      "description": "PostgreSQL connection URL",
      "examples": [
        "postgresql://user:password@localhost:5432/dbname",
        "postgresql+asyncpg://user:password@localhost:5432/dbname"
      ]
    },
    "REDIS_URL": {
      "type": "string",
      "description": "Redis connection URL",
      "default": "redis://localhost:6379/0",
      "examples": ["redis://localhost:6379/0"]
    },
    "LLM_PROVIDER": {
      "type": "string",
      "description": "LLM provider to use",
      "enum": ["openai", "anthropic", "mock"],
      "default": "mock"
    },
    "LLM_API_KEY": {
      "type": "string",
      "description": "API key for the LLM provider (required in production)"
    },
    "LLM_MODEL": {
      "type": "string",
      "description": "LLM model to use",
      "default": "gpt-4o-mini",
      "examples": ["gpt-4o-mini", "gpt-4o", "claude-3-sonnet"]
    },
    "LLM_TIMEOUT": {
      "type": "integer",
      "description": "Timeout for LLM requests in seconds",
      "default": 30
    },
    "IMAGE_PROVIDER": {
      "type": "string",
      "description": "Image generation provider",
      "enum": ["replicate", "fal", "mock"],
      "default": "mock"
    },
    "IMAGE_API_KEY": {
      "type": "string",
      "description": "API key for the image provider (required in production)"
    },
    "IMAGE_TIMEOUT": {
      "type": "integer",
      "description": "Timeout for image generation in seconds",
      "default": 90
    },
    "IMAGE_MAX_CONCURRENT": {
      "type": "integer",
      "description": "Maximum concurrent image generation requests",
      "default": 3
    },
    "IMAGE_MAX_RETRIES": {
      "type": "integer",
      "description": "Maximum retries for image generation",
      "default": 3
    },
    "TTS_PROVIDER": {
      "type": "string",
      "description": "Text-to-speech provider",
      "enum": ["google", "elevenlabs", "mock"],
      "default": "mock"
    },
    "GOOGLE_TTS_API_KEY": {
      "type": "string",
      "description": "Google Cloud TTS API key"
    },
    "ELEVENLABS_API_KEY": {
      "type": "string",
      "description": "ElevenLabs API key"
    },
    "ELEVENLABS_VOICE_ID": {
      "type": "string",
      "description": "ElevenLabs voice ID",
      "default": "21m00Tcm4TlvDq8ikWAM"
    },
    "S3_ENDPOINT": {
      "type": "string",
      "description": "S3-compatible storage endpoint",
      "examples": [
        "http://localhost:9000",
        "https://s3.amazonaws.com",
        "https://<account_id>.r2.cloudflarestorage.com"
      ]
    },
    "S3_ACCESS_KEY": {
      "type": "string",
      "description": "S3 access key"
    },
    "S3_SECRET_KEY": {
      "type": "string",
      "description": "S3 secret key"
    },
    "S3_BUCKET": {
      "type": "string",
      "description": "S3 bucket name",
      "default": "storybook"
    },
    "S3_REGION": {
      "type": "string",
      "description": "S3 region",
      "default": "us-east-1"
    },
    "S3_PUBLIC_URL": {
      "type": "string",
      "description": "Public URL prefix for S3 objects"
    },
    "CELERY_BROKER_URL": {
      "type": "string",
      "description": "Celery broker URL",
      "default": "redis://localhost:6379/1"
    },
    "CELERY_RESULT_BACKEND": {
      "type": "string",
      "description": "Celery result backend URL",
      "default": "redis://localhost:6379/2"
    },
    "RATE_LIMIT_REQUESTS": {
      "type": "integer",
      "description": "Rate limit: requests per window",
      "default": 10
    },
    "RATE_LIMIT_WINDOW": {
      "type": "integer",
      "description": "Rate limit window in seconds",
      "default": 60
    },
    "JOB_MAX_RETRIES": {
      "type": "integer",
      "description": "Maximum job retries",
      "default": 3
    },
    "JOB_SLA_SECONDS": {
      "type": "integer",
      "description": "Job SLA timeout in seconds",
      "default": 600
    },
    "USE_CELERY": {
      "type": "boolean",
      "description": "Use Celery for background tasks (true for production)",
      "default": false
    },
    "CORS_ORIGINS": {
      "type": "string",
      "description": "Comma-separated list of allowed CORS origins, or '*' for all",
      "default": "*"
    },
    "DEBUG": {
      "type": "boolean",
      "description": "Enable debug mode",
      "default": false
    }
  }
}
